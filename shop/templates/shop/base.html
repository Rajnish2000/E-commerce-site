<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <!-- 
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous"> -->
    <title>{% block title %} {% endblock %}</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
    <!-- Bootstrap core CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.0/css/mdb.css" rel="stylesheet">
    <!-- JQuery -->
    <!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.js"></script> -->
    <!-- Bootstrap tooltips -->
    <!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script> -->
    <!-- Bootstrap core JavaScript -->
    <!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script> -->
    <!-- MDB core JavaScript -->
    <!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js"></script>
 -->
    <style>
        {% block css %} {% endblock %}
        .navbar{
            background-color: #1579dc!important;
            z-index:99;
             overflow: hidden;
         }
         .sticky {
              position: fixed;
              top: 0px;
              bottom: auto;
              width: 100%;
             
            }
          .sticky .navbar-nav .nav-link {
             color: aquamarine;
           }
         .navbar-brand{
               color: #fff;
               font-weight: bold;
               font-family: auto;
         }
         .navbar .collapse ul li {
                font-weight:500;
         }
         .navbar .collapse ul li a{
               opacity:1;
         }
        .navbar-dark .navbar-nav .nav-link {
             color: rgb(255 255 255 / 98%);
    }
    #main{
      margin-top: 5rem;
    }
    #myBtn {
      display: none; 
      position: fixed; 
      bottom: 30px; 
      right: 30px; 
      z-index: 99; 
      border: none;
      outline: none; 
      background-color: red; 
      color: white;
      cursor: pointer;
      padding: 15px;
      border-radius: 100px;
      font-size: 18px;
}

#myBtn:hover {
  background-color: #555; /* Add a dark-grey background on hover */
}    
#foottitle{
    color:white;
    font-weight:bold;
    margin:8px;
    transition:1s;
        float:left;
    }
#foottitle:hover{
    color:lightblue;
    font-weight:bold;
    margin:8px;
    transition:1s;
    }
#logoimage{
            height:50px;
            width:50px;
        }
.votemepara{
        color:white;
        margin:10px;
        font-family:Lucida Handwriting;
        transition:1s;
    }
.votemepara:hover{
        color:orange;
        margin:10px;
        font-family:Lucida Handwriting;
        transition:1s;
    }
#list li a{
        color:white;
        font-size:20px;
        text-decoration:none;
        transition:1s;
    }
#list li a:hover{
        color:crimson;
        font-size:20px;
        text-decoration:none;
        transition:1s;
    }
#list{
list-style:none;
}
#list li{
    padding:8px;
}
#subscribe{
    color:white;
    font-weight:bold;
    text-align:center;
}
.subs{
    color: darkblue;
    text-align: center;
    width:370px;
    height:50px;
    font-size:16px;
    border-radius:40px;
}
#btn2{
    font-size:28px;
    color:white;
    background:transparent;
    margin-left:10px;
    margin-top:5px;
    transition:1s;
    border:none;
}
#btn2:hover{
    font-size:28px;
    color:#180745;
    background:white;
    margin-left:10px;
    margin-top:5px;
    transition:1s;
    border:none;
}
.footer-area{
    height:auto;
    width:100%;
    background-color:#3c4fff;
    position: relative;
    padding-top:40px;
    padding-bottom:40px;
}
</style>
</head>

<body>
    {% load static %}
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky" id="nav">
        <a class="navbar-brand" href="/shop/">My Shop Cart</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="/shop">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/shop/about/">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/shop/tracker/">Tracker</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/blog/">Blog</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/shop/contact/">Contact Us</a>
                </li>
            </ul>
            <form action='/shop/search' method="get" class="form-inline my-2 my-lg-0">
                <input class="form-control mr-sm-2" type="search" name="search" placeholder="Search" aria-label="Search" id="search">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
            </form>
            <!--    <button type="button" class="btn btn-secondary mx-3" data-toggle="tooltip" data-placement="bottom" data-html ="true" title="Tooltip on bottom">Cart(<span id ="popcart"></span>)-->
            <!--  </button>-->
            <button type="button" class="btn btn-secondary mx-2" data-container="body" id="cartpop" data-toggle="popover" data-placement="bottom" data-content='cart items' data-html="true">
                Cart(<span id="popcart"></span>)
            </button>
        </div>
    </nav>
    
    <div id="main">
      {% block body %}{% endblock%}

    
    </div>
    
    <footer class="footer-area">
    <section class="footer">
        <div class="container-fluid">
            <div class="row">
                    <div class="col-sm-5">
                        <div class="footer-brand">
                            <h3 id="foottitle">MyShopCart</h3>
                            <a href="#"><img src="{% static 'image/logo1.png' %}"id="logoimage" alter ='no image'></a>
                        </div>
                        <p class="votemepara">My Shop cart is an e-commerce company headquartered in Bangalore, Karnataka, India and registered in Singapore.[8] The company initially focused on book sales before expanding into other product categories such as consumer electronics, fashion, home essentials, groceries, and lifestyle products.
                        </p>
                    </div>
                    <div class="col-sm-2">
                        <ul id="list">
                            <li><a href="/shop/services">Service</a></li>
                            <li><a href="/shop/team">Team</a></li>
                            <li><a href="#">FAQ</a></li>
                            <li><a href="/shop/privacy">Privacy Policy</a></li>
                            {% comment %} <li><a href="#">Support</a></li> {% endcomment %}
                        </ul>
                    </div>
                    <div class="col-sm-5">
                        <h2 id="subscribe">Subscribe Our Newsletter</h2>
                        <p class="votemepara">If we donâ€™t vote, we are ignoring history and giving away the future.</p>
                        <div class="form">
                            <form class="form-group">
                                <input type="text" name="subtext" placeholder="example@gmail.com" class="form-group subs">
                                <button type="button" value="Subscribe" id="btn2"><i class="fa fa-paper-plane-o"></i></button>
                            </form>
                        </div>
                    </div>
                </div>
        </div>
    </section>
</footer>
    
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    
  
    
    {% block js %}
    <script>
           // navbar sticky code portion 

    window.onscroll = function() { myFunction() };
    // Get the navbar
    var navbar = document.getElementById("nav");

    // Get the offset position of the navbar
    var sticky = navbar.offsetTop;

    // Add the sticky class to the navbar when you reach its scroll position. Remove "sticky" when you leave the scroll position
    function myFunction() {
        if (window.pageYOffset >= sticky) {
            navbar.classList.add("sticky")
        } else {
            navbar.classList.remove("sticky");
        }
    }


    console.log('sctipt is working');
    if (localStorage.getItem('cart') == null) {
        var cart = {};
    } else {
        cart = JSON.parse(localStorage.getItem('cart'));
        document.getElementById('popcart').innerHTML = Object.keys(cart).length;
    }
    //  Update cart function 
    function updateCart(cart) {
        var sum = 0;
        console.log(cart);
        for (var item in cart) {
            sum = sum + cart[item];
            document.getElementById('div' + item).innerHTML = "<button id='minus" + item + "' class ='btn btn-primary minus'>-</button><span id='val" + item + "'>" + cart[item] + "</span><button id='plus" + item + "' class='btn btn-primary plus'> +</button>";

        }
        localStorage.setItem("cart", JSON.stringify(cart));
        document.getElementById('popcart').innerHTML = sum;
        updatePopover(cart);

    }
    
    $('.cart').click(function() {
        console.log('cart is clicked');
        var idstr = this.id.toString();
        console.log(idstr);
        if (cart[idstr] != undefined) {
            cart[idstr] = cart[idstr] + 1;
        } else {
            cart[idstr] = 1;
        }
        console.log(cart);
        updateCart(cart);
        localStorage.setItem("cart", JSON.stringify(cart));
        document.getElementById('popcart').innerHTML = Object.keys(cart).length;
    });

    mybutton = document.getElementById("myBtn");

    // When the user scrolls down 20px from the top of the document, show the button
    window.onscroll = function() {scrollFunction()};

    function scrollFunction() {
      if (document.body.scrollTop > 120 || document.documentElement.scrollTop > 120) {
        mybutton.style.display = "block";
      } else {
        mybutton.style.display = "none";
      }
    }

    // When the user clicks on the button, scroll to the top of the document
    function topFunction() {
      document.body.scrollTop = 0; // For Safari
      document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    }
    </script>
    {% endblock %}
</body>

</html>